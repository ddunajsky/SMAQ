#include <stddef.h>
#include <string.h>
#include <time.h>

#if defined(__cplusplus)
extern "C" {
#endif
const char *mg_unlist(size_t no);
const char *mg_unpack(const char *, size_t *, time_t *);
#if defined(__cplusplus)
}
#endif

static const unsigned char v1[] = {
  31, 139,   8,   8,  14,   6, 237, 101,   4,   0, 105, 110, // .......e..in
 100, 101, 120,  46, 104, 116, 109, 108,   0, 173,  86, 223, // dex.html..V.
 111, 218,  48,  16, 126, 175, 212, 255, 225, 154, 151, 134, // o.0.~.......
 169,  73,  32,  80, 105,  82,   9,  15, 163,  63, 167, 117, // .I PiR...?.u
 173,   4, 157, 180,  71, 147,  28, 141,  55, 199, 137, 108, // ....G...7..l
   7, 134, 166, 254, 239, 115,  28, 126,   4,  72,  89, 105, // .....s.~.HYi
 201,  75, 156, 243, 125, 223, 119, 118, 238, 206, 238, 158, // .K..}.wv....
  92,  62, 244, 135,  63,  31, 175,  32,  86,   9, 235,  29, // .>..?.. V...
  31, 117, 139,  55,  48, 194, 159,   3,  11, 185, 101,  44, // .u.70.....e,
  72, 162, 226, 157, 160,  34,  16, 198,  68,  72,  84, 129, // H...."..DHT.
 245,  52, 188, 118,  62,  91,  75,  59,  39,   9,   6, 214, // .4.v>[K;'...
 132, 226,  52,  75, 133, 178,  32,  76, 185,  66, 174, 253, // ..4K.. L.B..
 166,  52,  82, 113,  16, 225, 132, 134, 232, 152, 143,  51, // .4Rq.......3
 160, 156,  42,  74, 152,  35,  67, 194,  48, 104, 185,  77, // ..*J.#C.0h.M
 195, 163, 168,  98, 216,  27,  32, 151, 169, 128,  75,  34, // ...b.. ...K"
 227,  81,  74,  68, 212, 245, 140,  93,  59,  28,  31, 193, // .QJD...];...
 252, 233, 158,  56,  14, 244,   7,   3,  96, 148, 255,   6, // ...8....`...
 199, 233,  65, 101, 206, 216,   4, 178, 192, 146, 106, 198, // ..Ae......j.
  80, 198, 136,  58, 158,  88, 224, 120,  97, 113,  67,  41, // P..:.X.xaqC)
 141, 162, 183,  88, 218,  40, 141, 102,  61,  13, 214, 195, // ...X.(.f=...
 136,  78,  32, 100,  68, 202, 192,  42, 214,  64,  40,  71, // .N dD..*.@(G
 161, 157,  13, 127, 117,  82,  22, 113,  46, 103, 204, 108, // ....uR.q.g.l
 236, 247, 134, 152, 100,  40, 136, 202,   5, 106, 118, 191, // ....d(...jv.
  58, 155, 173,  35, 157,   9,  97,  57,  90,  64, 163, 133, // :..#..a9Z@..
 165, 101, 245,  28, 167, 235, 101,  11,  49,  79, 171, 189, // .e....e.1O..
  89, 248,  54,  79, 104,  68, 213, 108, 111,  85, 255,  35, // Y.6OhD.loU.#
 170, 253,   7, 127, 111, 193, 246,  71,   4,  31, 137,  80, // ....o..G...P
  52, 100,   8, 247,  68,  41,  20, 224, 187, 231, 123,   7, // 4d..D)....{.
 208, 169,  15, 160, 124, 175, 136,  42, 148,  50,  20,  52, // ....|..*.2.4
  83, 213,  44, 243,  60, 184, 206, 121, 168, 104, 202,  65, // S.,.<..y.h.A
 165, 144, 103,  17,  81,   8,  37,  63,  24,  69,   9,  83, // ..g.Q.%?.E.S
 170,  98,  16, 132,  71, 105,   2,  60,  79,  70,  40, 228, // .b..Gi.<OF(.
 138,  96, 188,  64, 223, 160,  42,  83, 254, 135,  65, 217, // .`.@..*S..A.
  13, 248,  91, 122,  45,  61,  81, 133, 177, 125, 234, 145, // ..[z-=Q..}..
 140, 122, 165, 128,  60, 109, 172, 187, 184,  42,  70, 110, // .z..<m...*Fn
  11,   8, 122,  32, 220,  95,  50, 229, 118, 163, 214,  67, // ..z ._2.v..C
   7,  73, 180, 211,  82,  97, 245, 232, 152, 197,  60, 252, // .I..Ra....<.
 150,   9,   4,   2,  40, 188, 221, 185, 237,  98,  23, 194, // ....(....b..
 175,  65, 248,  59,  17, 237,  26,  68, 123,  39, 162,  83, // .A.;...D{'.S
 131, 232, 212,  32, 162,  52, 204,  19, 221, 120, 220, 103, // ... .4...x.g
  84,  87,  12, 139, 225, 151, 217,  93, 100,  47, 107, 172, // TW.....]d/k.
 225,  42, 252, 163, 250, 101, 123, 210, 124, 213,  69, 239, // .*...e{.|.E.
 207, 231, 191, 194, 231, 191, 147, 175, 253,  10,  95, 251, // .........._.
 157, 124, 157,  87, 248,  58, 117, 124,  47,  27,  73,  83, // .|.W.:u|/.IS
 180, 220, 117, 203, 214, 215, 170,  28, 110, 144,  23, 141, // ..u.....n...
  15, 231,  25, 191,  81,  11,  35,  84,  83,  68,  14,  77, // ....Q.#TSD.M
 208, 179, 208, 106,  54, 231, 216,  21, 126,  59,   1, 139, // ...j6...~;..
  26, 143, 221,  49,  75,  83,  97, 155,  97, 201, 172,  43, // ...1KSa.a..+
 228, 147, 102, 104,  53,  46, 118, 112, 248,   7, 224, 104, // ..fh5.vp...h
  31, 128, 163, 179,  63, 199, 218, 174,  62, 149, 141,  69, // ....?...>..E
  87,  47, 220,  14, 239, 191,   1, 150, 191, 184, 108,  46, // W/........l.
 198, 204, 113, 186, 190, 215, 235, 209, 108, 198, 182, 119, // ..q.....l..w
  62, 127,  29,  60, 124, 119, 165,  18, 148,  63, 211, 241, // >..<|w...?..
 204,  22,  53, 203,  61, 100,  78, 255, 159, 238, 205,  41, // ..5.=dN....)
 253,  82, 201, 222, 237,  54, 123, 177, 185, 207, 219,  13, // .R...6{.....
  28,  39,  40, 102, 112, 174, 173, 250,  38,  16,  73, 176, // .'(fp...&.I.
 207, 155, 205,  38,  36, 148,  49,  58,  55,  85,  10,  70, // ...&$.1:7U.F
  95, 138, 238, 116,  64,  66,  99, 237,  13, 177,  51,  40, // _..t@Bc...3(
 128,  85, 197, 174,  87,  30,  41, 203,  35, 168, 184, 128, // .U..W.).#...
 152,  51, 200,  92, 195, 254,   1,  62, 157, 213, 117, 150, // .3.....>..u.
   9,   0,   0, 0 // ...
};
static const unsigned char v2[] = {
  31, 139,   8,   8,  82, 144, 222, 101,   4,   0, 115, 116, // ....R..e..st
 121, 108, 101, 115,  46,  99, 115, 115,   0, 109, 208, 193, // yles.css.m..
  14, 130,  48,  12,   6, 224, 187, 137, 239, 208, 196, 171, // ..0.........
  51, 104,  52,  49, 243, 228, 163,  20,  54, 160, 201,  88, // 3h41....6..X
 201,  54,  20,  52, 190, 187,  67,   8,  40, 113, 183, 117, // .6.4..C.(q.u
 255, 190, 118,  75,  89, 117, 240,  92, 175,  32, 174, 156, // ..vKYu... ..
 109,  16,  57,  86, 100,  58,   9,  87,  71, 104, 182, 224, // m.9Vd:.WGh..
 209, 122, 225, 181, 163, 252,  50, 132,  42, 116,   5,  89, // .z....2.*t.Y
   9, 201, 184, 175,  81,  41, 178, 197,  80, 120, 173,  87, // ....Q)..Px.W
 187,  44,  42,  72,  86, 187, 200, 142,  55,  90, 113,  39, // .,*HV...7Zq'
  21,  74,   9, 231,  36, 169, 219,  37,   4, 216,   4,  94, // .J..$..%...^
 106, 135,  24,  28,  65, 175, 173, 231,  73,  75, 217,  41, // j...A...IK.)
 237,  36, 236, 235,  22,  60,  27,  82, 176, 201, 178, 236, // .$...<.R....
 242, 125,  40,  28,  42, 106, 188, 132, 211, 212, 108, 118, // .}(.*j....lv
 151,   3, 136, 148,  67, 224, 234,  95, 199, 242, 240, 105, // ....C.._...i
  58,  71,   3, 215, 195,  59, 231, 144, 184, 161, 105, 244, // :G...;....i.
 207,  15, 122, 122, 232, 200,  29, 123, 110, 174, 222,  53, // ..zz...{n..5
  21, 101, 144, 113,  68, 163, 122, 225,  13, 131, 159,  89, // .e.qD.z....Y
  36, 121,   1,   0,   0, 0 // $y...
};

static const struct packed_file {
  const char *name;
  const unsigned char *data;
  size_t size;
  time_t mtime;
} packed_files[] = {
  {"/web_root/index.html.gz", v1, sizeof(v1), 1710032454},
  {"/web_root/styles.css.gz", v2, sizeof(v2), 1710032451},
  {NULL, NULL, 0, 0}
};

static int scmp(const char *a, const char *b) {
  while (*a && (*a == *b)) a++, b++;
  return *(const unsigned char *) a - *(const unsigned char *) b;
}
const char *mg_unlist(size_t no) {
  return packed_files[no].name;
}
const char *mg_unpack(const char *name, size_t *size, time_t *mtime) {
  const struct packed_file *p;
  for (p = packed_files; p->name != NULL; p++) {
    if (scmp(p->name, name) != 0) continue;
    if (size != NULL) *size = p->size - 1;
    if (mtime != NULL) *mtime = p->mtime;
    return (const char *) p->data;
  }
  return NULL;
}
